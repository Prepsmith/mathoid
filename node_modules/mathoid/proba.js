'use strict';

var preq = require('preq');

var hostPort = 'http://localhost:10044/';

var complete;
var png;

return preq.post({
    uri: hostPort + 'complete',
    headers: { 'content-type': 'application.json' },
	body: {
        q: 'E=mc^2',
        type: 'tex'
    }
}).then(function(res) {
    var res = res.body.png;
    console.log('Constr: ' + res.body.constructor.name);
    console.log('Buffer: ' + Buffer.isBuffer(res.body));
    console.log('Type  : ' + res.body.type);
    complete = new Buffer(res.body.data);
    return preq.post({
        uri: hostPort + 'png',
        headers: { 'content-type': 'application.json' },
        body: {
            q: 'E=mc^2',
            type: 'tex'
        }
    });
}).then(function(res) {
    png = res.body;
    console.log('Equal : ' + png.compare(complete));
});

